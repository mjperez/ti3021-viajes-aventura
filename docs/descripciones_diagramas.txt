DESCRIPCIONES TECNICAS DE DIAGRAMAS - SISTEMA VIAJES AVENTURA

================================================================================

1. DIAGRAMA DE MODELO DE DATOS (ER)

Descripcion:
Modelo relacional normalizado que soporta la gestion comercial y operativa del sistema.

Componentes Principales:
- Usuarios: Credenciales encriptadas y roles (Admin/Cliente) para control de acceso.
- Reservas: Entidad central con estados excluyentes (PENDIENTE, PAGADA, CONFIRMADA, CANCELADA). Vincula un usuario con un unico producto (Paquete o Destino).
- Paquetes y Destinos: Productos comercializables. Implementan borrado logico (Soft Delete) mediante atributo 'activo'.
- Paquete_Actividad: Tabla de union para la relacion N:M, permitiendo composicion flexible de actividades por paquete.
- Actividades: Servicios asociados a destinos, tambien con borrado logico.
- PoliticasCancelacion: Reglas de negocio externalizadas para calculo de reembolsos.
- Pagos: Registro transaccional financiero, desacoplado del estado de la reserva.

================================================================================

2. DIAGRAMA DE CLASES (ARQUITECTURA)

Descripcion:
Arquitectura en capas aplicando patrones de diseÃ±o POO.

Componentes:
- Capa de Dominio (Politicas):
  - Patron Strategy/Template Method mediante clase abstracta 'PoliticaCancelacion'.
  - Subclases 'PoliticaFlexible' y 'PoliticaEstricta' con implementacion polimorfica de calculos.

- Capa de Servicios (Business Logic):
  - ActividadService/DestinoService: Gestion CRUD y validaciones de negocio.
  - PaqueteService: Orquestacion de paquetes y sus actividades asociadas.
  - AuthService: Seguridad y control de sesiones (Encapsulamiento).
  - ReservaService: Gestion de ciclo de vida de reservas y aplicacion de politicas.

- Capa de Acceso a Datos (DAO):
  - Abstraccion de persistencia SQL.
  - Implementacion de Soft Delete (UPDATE campo 'activo').
  - PaqueteActividadDAO para gestion de relaciones complejas.

- DTOs: Objetos de transferencia de datos inmutables entre capas.

================================================================================

3. PROCESO: AGREGAR DESTINO

Descripcion:
Flujo de alta de nuevos destinos turisticos.

Flujo:
1. Solicitud de creacion por Administrador.
2. Entrada de datos: nombre, costo, cupos, politica.
3. Validacion de tipos de datos y reglas de negocio (campos obligatorios, valores positivos).
4. Persistencia en base de datos.
5. Retorno de confirmacion con ID generado.

================================================================================

4. PROCESO: EDITAR DESTINO

Descripcion:
Flujo de modificacion de destinos existentes.

Flujo:
1. Seleccion de destino mediante ID.
2. Carga y despliegue de datos actuales.
3. Captura de modificaciones (soporte para valores parciales).
4. Validacion de integridad de datos nuevos.
5. Actualizacion (UPDATE) en base de datos.

================================================================================

5. PROCESO: ELIMINAR DESTINO (SOFT DELETE)

Descripcion:
Flujo de desactivacion logica de destinos.

Flujo:
1. Seleccion de destino activo por ID.
2. Despliegue de informacion para confirmacion.
3. Ejecucion de borrado logico (SET activo = FALSE).
4. Mantenimiento de integridad referencial con reservas historicas.

================================================================================

6. PROCESO: GESTION DE PAQUETES

Descripcion:
Operaciones CRUD y gestion de composicion de paquetes.

Operaciones:
- Listar: Recuperacion filtrada de paquetes activos.
- Alta: Creacion con validacion temporal (Fecha Inicio >= Hoy) y asignacion de politica.
- Edicion: Modificacion de atributos base.
- Gestion Actividades: ABM (Alta/Baja/Modificacion) de actividades especificas dentro de un paquete (relacion N:M).
- Baja: Desactivacion logica.

================================================================================

7. PROCESO: CICLO DE VIDA DE RESERVA

Descripcion:
Maquina de estados de una reserva.

Estados y Transiciones:
1. Creacion (Cliente) -> Estado PENDIENTE (Reserva de cupo).
2. Pago (Cliente) -> Estado PAGADA (Registro financiero).
3. Confirmacion (Admin) -> Estado CONFIRMADA (Validacion final).
4. Cancelacion -> Estado CANCELADA (Liberacion de cupo y calculo de reembolso segun politica).

================================================================================

8. CASOS DE USO: GESTION DE DESTINOS

Actores: Administrador, Cliente.

Funcionalidad:
- Admin: Control total (CRUD Logico). Asignacion obligatoria de politicas de cancelacion.
- Cliente: Consulta (Lectura) y busqueda.

================================================================================

9. CASOS DE USO: GESTION DE PAQUETES

Actores: Administrador, Cliente.

Funcionalidad:
- Admin: Control total (CRUD Logico). Gestion de composicion (Destinos/Actividades/Fechas).
- Cliente: Consulta de catalogo y visualizacion detallada de desglose de actividades.

================================================================================

10. CASOS DE USO: GESTION DE USUARIOS

Actores: Visitante, Cliente, Administrador.

Funcionalidad:
- Visitante: Registro (Rol Cliente por defecto) y Login.
- Admin: Visualizacion de cartera de clientes y auditoria de reservas por usuario.

================================================================================

11. CASOS DE USO: OPERACIONES DE RESERVA

Actores: Cliente, Administrador.

Funcionalidad:
- Cliente: Busqueda, generacion de reserva, pago y cancelacion.
- Admin: Confirmacion operativa de reservas pagadas.
- Sistema: Ejecucion automatica de reglas de reembolso (Polimorfismo) al cancelar.
